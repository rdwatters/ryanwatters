{% extends "templates/partials/base.html" %} 
{% block title %}{% parent %} - Home{% endblock %} 
{% block content %} 
{% set articles = cms.articles|sort('publish_date', true) %}
{% set articles = articles|slice(0,5) %}
{% set authors = cms.authors %}
<article class="list-of-articles" itemscope itemtype="http://schema.org/Blog">
    {% for article in articles %}
    <div class="list-article-wrapper">
    <section class="list-article-section">
        {# Article Topic #} 
        {% if article.related_video %}
            {% set video = article.related_video %}
            {% set ss = video.streaming_service %}
                {% if ss == "YouTube"%}
                    {% set videoId = video.video.original_url.split('v=')[1] %}
                    <section class="list-article-video">
                        <section class="list-article-topic"><a href="{{ url(article.topic) }}">{{ article.topic.name}}</a></section>
                        <div class="video-player-youtube" data-youtubeid="{{videoId}}">
                                {% if video.thumbnail_override %}
                                    <img class="video-thumb" src="{{ video.thumbnail_override|imageCrop(560,315)}}" alt="{{video.video_title}}">
                                {% else %}
                                    <img class="video-thumb" src="{{ video.video.thumbnail_url|imageCrop(560,315) }}" alt="{{ video.video_title}}" class="video-thumbnail">
                                {% endif %}
                            <div class="play-button" role="button">
                                <svg class="play-button-svg" fill="#ffffff" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve"><path id="play-button-outer-circle" d="M52.883,5.869c-23.782,0-43.061,19.279-43.061,43.061c0,23.783,19.279,43.062,43.061,43.062  c23.781,0,43.06-19.279,43.06-43.062C95.942,25.148,76.664,5.869,52.883,5.869z M52.883,89.738  c-22.538,0-40.807-18.27-40.807-40.809c0-22.537,18.27-40.807,40.807-40.807c22.537,0,40.807,18.27,40.807,40.807  C93.689,71.469,75.42,89.738,52.883,89.738z" /><path id="play-button-inner-triangle" d="M52.881,14.708c-18.9,0-34.222,15.321-34.222,34.223c0,18.901,15.322,34.221,34.222,34.221  c18.901,0,34.224-15.32,34.224-34.221C87.104,30.03,71.782,14.708,52.881,14.708z M55.883,58.107L40.02,67.226l0.035-18.294  l0.034-18.296l15.828,9.176l15.828,9.178L55.883,58.107z" /></svg>
                            </div>
                        </div>
                        <section class="list-publish-date">
                            <span class="month">{{- article.publish_date|date('F') -}}</span>
                            <span class="day">{{- article.publish_date|date('d') -}}</span>
                            <span class="year">{{- article.publish_date|date('Y') -}}</span>
                        </section>
                    </section>
                {% elseif ss == "Vimeo" %}
                {% set videoId = video.video.original_url.split('vimeo.com/')[1] %}
                    <section class="list-article-video">
                        <section class="list-article-topic"><a href="{{ url(article.topic) }}">{{ article.topic.name}}</a></section>
                        <div class="video-player-vimeo" data-vimeoid="{{video.video.original_url.split('vimeo.com/')[1]}}">
                        {% if row.video.thumbnail_override %}
                            <img class="video-thumb" src="{{video.thumbnail_override|imageCrop(560,315)}}" alt="{{row.video.video_title}}">
                        {% else %}
                            <img class="video-thumb" src="{{video.video.thumbnail_url|imageCrop(560,315)}}" alt="{{row.video.video_title}}" >             
                        {% endif %}
                            <div class="play-button" role="button">
                                <svg class="play-button-svg" fill="#ffffff" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 100 100" xml:space="preserve">
                                <path id="play-button-outer-circle" d="M52.883,5.869c-23.782,0-43.061,19.279-43.061,43.061c0,23.783,19.279,43.062,43.061,43.062  c23.781,0,43.06-19.279,43.06-43.062C95.942,25.148,76.664,5.869,52.883,5.869z M52.883,89.738  c-22.538,0-40.807-18.27-40.807-40.809c0-22.537,18.27-40.807,40.807-40.807c22.537,0,40.807,18.27,40.807,40.807  C93.689,71.469,75.42,89.738,52.883,89.738z" />
                                <path id="play-button-inner-triangle" d="M52.881,14.708c-18.9,0-34.222,15.321-34.222,34.223c0,18.901,15.322,34.221,34.222,34.221  c18.901,0,34.224-15.32,34.224-34.221C87.104,30.03,71.782,14.708,52.881,14.708z M55.883,58.107L40.02,67.226l0.035-18.294  l0.034-18.296l15.828,9.176l15.828,9.178L55.883,58.107z" />
                                </svg>
                            </div>
                        </div>
                        <section class="list-publish-date">
                            <span class="month">{{- article.publish_date|date('F') -}}</span>
                            <span class="day">{{- article.publish_date|date('d') -}}</span>
                            <span class="year">{{- article.publish_date|date('Y') -}}</span>
                        </section>
                    </section>
                {% endif %}        
        {% else %}
                    <section class="list-article-image">
                        <section class="list-article-topic"><a href="{{ url(article.topic) }}">{{ article.topic.name}}</a></section>
                        <div class="article-image">
                            <img src="{{article.image|imageCrop(560,315)}}" alt="{{ article.image_description }}" itemprop="image">
                        <section class="list-publish-date">
                            <span class="month">{{- article.publish_date|date('F') -}}</span>
                            <span class="day">{{- article.publish_date|date('d') -}}</span>
                            <span class="year">{{- article.publish_date|date('Y') -}}</span>
                        </section>
                        </div>
                    </section>
        {% endif %}
                    <div class="list-article-information" itemprop="blogPost">
                        <h1 class="list-article-title">
                            <a href="{{ url(article) }}">{{ article.title }}</a>
                        </h1>
                        <p class="list-article-description">{{ article.description }}</p>
                        <div class="author-and-tags-container">
                            <a href="{{ url(article.author[0]) }}">
                                <div class="author-photo">
                                    <img class="author-image-small" src="{{article.author[0].author_photo|imageCrop(50,50)}}" alt="Photograph of the author: {{ article.author[0].full_name.first }} {{ article.author[0].full_name.last }}">
                                </div>                        
                                <div class="article-author" itemprop="author">
                                    {{ article.author[0].full_name.first }} {{ article.author[0].full_name.last }}
                                </div>
                            </a>
                            <div class="article-tags" itemprop="keywords">{% for tag in article.tags %}
                                <span class="article-tag"><a href="{{url(tag)}}">{{ tag.name|lower }}</a></span> {% endfor %}
                            </div>
                        </div>
                    </div>
        </section>
    </div>
    {% endfor %}
</article>
<aside>
    <section class="home-about-rail-widget">
        {% for author in authors %}
        <span class="author-name"><strong>About </strong>{{ author.full_name.first }} {{ author.full_name.last }}</span>
        <div class="author-image">
            <img src="{{ author.author_photo|imageSize(200, 200) }}" />
        </div>
        <div class="author-bio-short">{{ author.short_bio }}</div>
        <ul class="author-social">
            {% if author.github%}
            <li class="github"><a href="{{ author.github }}" target="_blank"></a></li>
            {% endif %} {% if author.twitter %}
            <li class="twitter"><a href="https://www.twitter.com/@{{ author.twitter }}" target="_blank"></a></li>
            {% endif %} {% if author.website %}
            <li class="author-website"><a href="{{ author.website }}"></a></li>
            {% endif %} {% if author.email %}
            <li class="email"><a href="mailto:{{ author.email }}"></a></li>
            {% endif %} {% if author.linkedin %}
            <li class="linkedin"><a href="{{ author.linkedin }}" target="_blank"></a></li>
            {% endif %}
        </ul>
        {% endfor %}
    </section>
</aside>

{% endblock %}
